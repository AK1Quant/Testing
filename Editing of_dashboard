---
title: "OPTIX Dashboard"
output: 
  flexdashboard::flex_dashboard:
    runtime: shiny
    orientation: rows
    vertical_layout: fill
---

```{r setup, include=FALSE}
library(shiny)
library(flexdashboard)

# Reactive value to track if the user has clicked "Enter"
user_entered <- reactiveVal(FALSE)
```

```{r ui, echo=FALSE}
# Show the modal dialog when the app starts
observe({
  if (!user_entered()) {
    showModal(
      modalDialog(
        title = "Welcome to OPTIX",
        "Welcome to the OPTIX dashboard! Click Enter to proceed.",
        easyClose = FALSE,
        footer = actionButton("enter_button", "Enter")
      )
    )
  }
})

# Close the modal and allow access when the button is clicked
observeEvent(input$enter_button, {
  user_entered(TRUE)
  removeModal()
})
```

### Main Dashboard Content

```{r, echo=FALSE}
# Show content only after the user clicks "Enter"
output$main_content <- renderUI({
  req(user_entered()) # Wait until user clicks Enter

  tagList(
    # Example content
    valueBox(value = "42", caption = "Sample Metric"),
    valueBox(value = "100%", caption = "Completion Rate")
  )
})

uiOutput("main_content")
```
